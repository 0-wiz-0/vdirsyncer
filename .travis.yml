language: python
python: "2.7"
env:
    global:
        - IS_TRAVIS=true
        - CFLAGS=-O0
    matrix:
        - DAV_SERVER=radicale_filesystem REQUIREMENTS=release
        - DAV_SERVER=radicale_filesystem REQUIREMENTS=devel
        - DAV_SERVER=radicale_database REQUIREMENTS=release
        - DAV_SERVER=radicale_database REQUIREMENTS=devel
        - DAV_SERVER=owncloud REQUIREMENTS=release

install:
    - "./install-deps.sh"
    - "pip install coveralls"
script:
    - "coverage run --source=vdirsyncer/,tests/ --module pytest"
after_success:
    - "coverage report --show-missing"
    - "coveralls"
